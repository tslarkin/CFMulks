{% load notebook_extras %}

{% if field == 'seq_num'%}
<input id="editing" class="sequence" name="seq_num"  hx-swap="outerHTML" type="number" hx-get="/showfield/?scan={{scan.id}}&field=seq_num" 
    hx-target="this"  hx-trigger="keyup[event.key === 'Escape']" value= "{{ scan.seq_num }}">
{% elif field == 'transcription'%}
<textarea id="editing" style="width:100%" name="transcription" placeholder="Transcription" 
    rows="12"  
class="editfield">{% if scan.transcription %}{{ scan.transcription}}{% endif %}</textarea>
{% else %}
<textarea id="editing" style="width:100%" name="description" placeholder="Comment" 
    rows="12"  
   class="editfield">{% if scan.description %}{{ scan.description}}{% endif %}</textarea>
{% endif %}
<div id="end-editing" style="width: 100%; display:flex; flex-flow: row nowrap; justify-content: space-around"
 hx-swap="outerHTML" 
    hx-target="#editing"
    hx-trigger="click" 
    hx-include="#editing"
    hx-on:htmx:before-request='this.ownerDocument.getElementById("end-editing").remove()'>
<div style="cursor:pointer"  
    hx-post="/savefield/?scan={{scan.id}}&field={{field}}&save=False" >❌</div>
<div  style="cursor:pointer; font-size: 1.1em;" 
    hx-post="/savefield/?scan={{scan.id}}&field={{field}}&save=True"">✅</div>
</div>